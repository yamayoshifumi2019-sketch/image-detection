<!--
images.html - Image Gallery Page

This page displays all images uploaded by the current user.
Shows both original and detected (with bounding boxes) versions.
-->

{% extends 'base.html' %}

{% block title %}My Images - Object Detection App{% endblock %}

{% block content %}
<div class="images-page">
    <h1>My Images</h1>

    {% if images %}
        <p>You have uploaded {{ images|length }} image(s).</p>

        <div class="image-grid">
            {% for image in images %}
            <div class="image-card">
                <div class="image-comparison">
                    <div class="image-side">
                        <p class="image-label">Original</p>
                        <img src="{{ url_for('static', filename='uploads/' + image.stored_filename) }}"
                             alt="Original: {{ image.original_filename }}">
                    </div>
                    <div class="image-side">
                        <p class="image-label">Detected</p>
                        <img src="{{ url_for('static', filename='uploads/' + image.detected_filename) }}"
                             alt="Detected: {{ image.original_filename }}">
                    </div>
                </div>

                <div class="image-info">
                    <p class="image-filename">{{ image.original_filename }}</p>
                    <p class="image-results">
                        <strong>Detected:</strong> {{ image.detection_results or 'No objects detected' }}
                    </p>
                    <p class="image-date">
                        Uploaded: {{ image.uploaded_at.strftime('%Y-%m-%d %H:%M') }}
                    </p>
                </div>

                <form method="POST" action="{{ url_for('delete_image', image_id=image.id) }}"
                      class="delete-form" onsubmit="return confirm('Are you sure you want to delete this image?');">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-images">
            <p>You haven't uploaded any images yet.</p>
            <a href="{{ url_for('upload') }}" class="btn btn-primary">Upload Your First Image</a>
        </div>
    {% endif %}

    <div class="page-actions">
        <a href="{{ url_for('upload') }}" class="btn btn-primary">Upload New Image</a>
    </div>
</div>
{% endblock %}
